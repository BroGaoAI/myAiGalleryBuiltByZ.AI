const generateImage = async () => {
    console.log('generateImage function called');
    if (!prompt.trim()) {
      alert('è¯·è¾“å…¥æç¤ºè¯');
      return;
    }

    console.log('Starting image generation with prompt:', prompt);
    setIsGenerating(true);
    setGeneratedImage(null);
    try {
      const response = await fetch('/api/generate-volcengine', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          prompt,
          category,
          style,
          width: 1024,
          height: 1024
        }),
      });

      if (response.ok) {
        const data = await response.json();
        // æ˜¾ç¤ºç”Ÿæˆçš„å›¾åƒ
        setGeneratedImage(data.data.imageUrl);
        // åˆ·æ–°ä½œå“åˆ—è¡¨
        await fetchArtworks();
        setPrompt('');
        alert('ğŸ¨ å›¾åƒç”ŸæˆæˆåŠŸï¼ä½¿ç”¨ç«å±±å¼•æ“ doubao-seedream-4.0 æ¨¡å‹');
      } else {
        const error = await response.json();
        alert(`ç”Ÿæˆå¤±è´¥: ${error.error || 'æœªçŸ¥é”™è¯¯'}`);
      }
    } catch (error) {
      console.error('Failed to generate image:', error);
      alert('ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•');
    } finally {
      setIsGenerating(false);
    }
  };
